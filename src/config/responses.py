"""Configuration for message responses"""
import os
from dotenv import load_dotenv
from typing import List, Dict, Any

# Load environment variables
load_dotenv()

# General responses
GENERAL_RESPONSES = {
    'welcome_message': '××™×–×” ×›×™×£ ×©×©×œ×—×ª ×”×•×“×¢×”! ××™×š ××¤×©×¨ ×œ×¢×–×•×¨ ×œ×š ×”×™×•×?',
    'options': [
        '×ž×¢×‘×¨ ×“×™×¨×”',
        '×¡×™×“×•×¨ ×•××¨×’×•×Ÿ',
        '×¢×™×¦×•×‘ ×•×”×œ×‘×©×ª ×”×‘×™×ª',
        '×©×™×—×ª ×™×™×¢×•×¥',
        '××—×¨'
    ],
    'error': '×ž×¦×˜×¢×¨×ª, ×œ× ×”×‘× ×ª×™. ×”×× ×ª×•×›×œ/×™ ×œ× ×¡×— ×ž×—×“×©?'
}

# Service-specific responses
ORGANIZATION_RESPONSES = {
    'initial': {
        'welcome': '××©×ž×— ×œ×¢×–×•×¨ ×œ×š ×œ××¨×’×Ÿ ×•×œ×¡×“×¨! ××™×–×” ×—×œ×œ ×¦×¨×™×š ×¢×–×¨×”?',
        'options': {
            'title': '×‘×—×¨/×™ ×ž×”××¤×©×¨×•×™×•×ª:',
            'buttons': [
                '×—×“×¨ ×©×™× ×”/××¨×•×Ÿ ×‘×’×“×™×',
                '×ž×˜×‘×—',
                '×ž×©×¨×“ ×‘×™×ª×™',
                '××—×¨'
            ]
        }
    },
    'awaiting_pain_points': {
        'question': '×ž×” ×ž×¤×¨×™×¢ ×œ×š ×‘×ž×¦×‘ ×”× ×•×›×—×™? ×ž×” ×”×™×™×ª ×¨×•×¦×” ×œ×©×¤×¨?'
    },
    'awaiting_timing': {
        'question': '×ž×ª×™ ×”×™×™×ª ×¨×•×¦×” ×œ×”×ª×—×™×œ ×‘×ª×”×œ×™×š?',
        'options': {
            'title': '×‘×—×¨/×™:',
            'buttons': [
                '×‘×©×‘×•×¢ ×”×§×¨×•×‘',
                '×‘×—×•×“×© ×”×§×¨×•×‘',
                '×‘×¢×ª×™×“, ×¨×§ ×ž×ª×¢× ×™×™×Ÿ/×ª'
            ]
        }
    },
    'completed': {
        'final': '× ×©×ž×¢ ×ž×¢×•×œ×”! ××©×ž×— ×œ×”×™×¤×’×© ×œ×¤×’×™×©×ª ×™×™×¢×•×¥ ×œ×œ× ×¢×œ×•×ª ×›×“×™ ×œ×”×›×™×¨ ××ª ×”×ž×¨×—×‘ ×•×œ×”×¦×™×¢ ×¤×ª×¨×•× ×•×ª ×ž×•×ª××ž×™× ××™×©×™×ª. ×”×× ×ª×¨×¦×”/×™ ×œ×§×‘×•×¢ ×¤×’×™×©×”?',
        'schedule': {
            'title': '×ž×ª×™ × ×•×— ×œ×š?',
            'buttons': ['×‘×•×§×¨', '×¦×”×¨×™×™×', '×¢×¨×‘']
        }
    }
}

MOVING_RESPONSES = {
    'initial': {
        'welcome': "×©×ž×—×” ×œ×¢×–×•×¨ ×‘×ª×”×œ×™×š ×”×ž×¢×‘×¨! ðŸ \n\n"
                  "×”×©×™×¨×•×ª ×©×œ× ×• ×›×•×œ×œ:\n"
                  "- ×¡×™×“×•×¨ ×•××¨×’×•×Ÿ ×œ×¤× ×™ ×”××¨×™×–×”\n"
                  "- ××¨×™×–×” ×ž×§×¦×•×¢×™×ª ×©×œ ×›×œ ×”×‘×™×ª\n"
                  "- ×¤×¨×™×§×” ×•×¡×™×“×•×¨ ×‘×‘×™×ª ×”×—×“×©\n"
                  "- ×œ×™×•×•×™ ×•×™×™×¢×•×¥ ×œ××•×¨×š ×›×œ ×”×ª×”×œ×™×š",
        'options': {
            'title': '××™×–×” ×¡×•×’ ×¢×–×¨×” ××ª/×” ×¦×¨×™×›/×”?',
            'buttons': [
                '××¨×™×–×”',
                '×¤×¨×™×§×”',
                '×’× ××¨×™×–×” ×•×’× ×¤×¨×™×§×”'
            ]
        }
    },
    'awaiting_move_type': {
        'question': '×”×× ×ž×“×•×‘×¨ ×‘×ž×¢×‘×¨ ×‘×ª×•×š ×”××¨×¥ ××• ×ž×¢×‘×¨ ×ž×—×•×´×œ?',
        'options': {
            'title': '×× × ×‘×—×¨/×™:',
            'buttons': [
                '×ž×¢×‘×¨ ×‘×ª×•×š ×”××¨×¥',
                '×ž×¢×‘×¨ ×ž×—×•×´×œ'
            ]
        }
    },
    'awaiting_property_size': {
        'question': '×ž×” ×’×•×“×œ ×”×“×™×¨×” ×‘×¢×¨×š? (×‘×ž×´×¨)'
    },
    'awaiting_move_date': {
        'question': '×ž×ª×™ ×‘×¢×¨×š ×ž×ª×•×›× ×Ÿ ×”×ž×¢×‘×¨?'
    },
    'completed': {
        'final': '×ª×•×“×” ×¢×œ ×”×¤×¨×˜×™×! ××©×ž×— ×œ×§×‘×•×¢ ×¤×’×™×©×ª ×™×™×¢×•×¥ ×›×“×™ ×œ×“×‘×¨ ×¢×œ ×”×ª×”×œ×™×š ×‘×¤×™×¨×•×˜ ×•×œ×”×‘×™×Ÿ ××™×š ×× ×™ ×™×›×•×œ×” ×œ×¢×–×•×¨. ×”×× ××ª/×” ×¤× ×•×™/×” ×œ×©×™×—×” ×‘×™×ž×™× ×”×§×¨×•×‘×™×?',
        'schedule': {
            'title': '×ž×ª×™ × ×•×— ×œ×š?',
            'buttons': [
                '×”×‘×•×§×¨',
                '××—×”×´×¦',
                '×”×¢×¨×‘'
            ]
        }
    }
}

DESIGN_RESPONSES = {
    'initial': {
        'welcome': '××©×ž×— ×œ×¢×–×•×¨ ×œ×š ×œ×¢×¦×‘ ××ª ×”×‘×™×ª! ××™×–×” ×¡×•×’ ×©×œ ×¤×¨×•×™×§×˜ ×ž×¢× ×™×™×Ÿ ××•×ª×š?',
        'options': {
            'title': '×‘×—×¨/×™ ×ž×”××¤×©×¨×•×™×•×ª:',
            'buttons': [
                '×¢×™×¦×•×‘ ×“×™×¨×” ×©×œ×ž×”',
                '×¢×™×¦×•×‘ ×—×“×¨ ×¡×¤×¦×™×¤×™',
                '×™×™×¢×•×¥ ×¦×‘×¢ ×•×˜×§×¡×˜×™×œ',
                '×¡×˜×™×™×œ×™× ×’ ×•××‘×–×•×¨'
            ]
        }
    },
    'awaiting_style_preference': {
        'question': '××™×–×” ×¡×’× ×•×Ÿ ×¢×™×¦×•×‘×™ ×ž×“×‘×¨ ××œ×™×š?',
        'options': {
            'title': '×‘×—×¨/×™:',
            'buttons': [
                '×ž×•×“×¨× ×™ ×•× ×§×™',
                '×—×ž×™× ×•×‘×™×ª×™',
                '×¡×§× ×“×™× ×‘×™',
                '××§×œ×§×˜×™'
            ]
        }
    },
    'awaiting_budget': {
        'question': '×ž×” ×”×ª×§×¦×™×‘ ×”×ž×©×•×¢×¨ ×©×”×™×™×ª ×¨×•×¦×” ×œ×”×©×§×™×¢ ×‘×¤×¨×•×™×§×˜?',
        'options': {
            'title': '×˜×•×•×— ×ª×§×¦×™×‘:',
            'buttons': [
                '×¢×“ 5,000 â‚ª',
                '5,000-15,000 â‚ª',
                '15,000-30,000 â‚ª',
                '×ž×¢×œ 30,000 â‚ª'
            ]
        }
    },
    'completed': {
        'final': '×ª×•×“×” ×¢×œ ×”×©×™×ª×•×£! ×›×“×™ ×©××•×›×œ ×œ×”×‘×™×Ÿ ×˜×•×‘ ×™×•×ª×¨ ××ª ×”×¦×¨×›×™× ×•×”×—×œ×œ, ××©×ž×— ×œ×”×™×¤×’×© ×œ×¤×’×™×©×ª ×™×™×¢×•×¥ ×¨××©×•× ×™×ª. ×‘×¤×’×™×©×” × ×•×›×œ ×œ×“×‘×¨ ×¢×œ ×”×¨×¢×™×•× ×•×ª ×©×œ×š ×•××•×›×œ ×œ×”×¦×™×¢ ×›×™×•×•× ×™ ×¢×™×¦×•×‘ ×ž×ª××™×ž×™×.',
        'schedule': {
            'title': '×ž×ª×™ × ×•×— ×œ×š ×œ×”×™×¤×’×©?',
            'buttons': ['×‘×•×§×¨', '×¦×”×¨×™×™×', '×¢×¨×‘']
        }
    }
}

CONSULTATION_RESPONSES = {
    'initial': {
        'welcome': '××©×ž×— ×œ×§×™×™× ××™×ª×š ×©×™×—×ª ×™×™×¢×•×¥! ×¢×œ ×ž×” ×”×™×™×ª ×¨×•×¦×” ×œ×“×‘×¨?',
        'options': {
            'title': '×‘×—×¨/×™ × ×•×©×:',
            'buttons': [
                '×ª×›× ×•×Ÿ ×ž×¢×‘×¨ ×“×™×¨×”',
                '××¨×’×•×Ÿ ×”×‘×™×ª',
                '×¢×™×¦×•×‘ ×”×‘×™×ª',
                '××—×¨'
            ]
        }
    },
    'awaiting_questions': {
        'question': '×”×× ×™×© ×©××œ×•×ª ×¡×¤×¦×™×¤×™×•×ª ×©×”×™×™×ª ×¨×•×¦×” ×©× ×“×‘×¨ ×¢×œ×™×”×Ÿ ×‘×©×™×—×”?'
    },
    'awaiting_consultation_type': {
        'question': '××™×š ×”×™×™×ª ×ž×¢×“×™×£/×” ×œ×§×™×™× ××ª ×”×¤×’×™×©×”?',
        'options': {
            'title': '×‘×—×¨/×™:',
            'buttons': [
                '×¤×’×™×©×” ×¤×¨×•× ×˜×œ×™×ª',
                '×©×™×—×ª ×•×™×“××•',
                '×©×™×—×ª ×˜×œ×¤×•×Ÿ'
            ]
        }
    },
    'completed': {
        'final': '×ž×¢×•×œ×”! ××©×ž×— ×œ×§×‘×•×¢ ××™×ª×š ××ª ×©×™×—×ª ×”×™×™×¢×•×¥. ×¤×’×™×©×ª ×™×™×¢×•×¥ ×¨××©×•× ×™×ª ×”×™× ×œ×œ× ×¢×œ×•×ª ×•× ×ž×©×›×ª ×›-45 ×“×§×•×ª.',
        'schedule': {
            'title': '×ž×ª×™ × ×•×— ×œ×š?',
            'buttons': [
                '×‘×™×ž×™ ×¨××©×•×Ÿ-×©×œ×™×©×™',
                '×‘×™×ž×™ ×¨×‘×™×¢×™-×—×ž×™×©×™',
                '×‘×™×•× ×©×™×©×™'
            ]
        }
    }
}

# Other responses for non-work related inquiries
OTHER_RESPONSES = {
    'initial': {
        'welcome': '×¤× ×™×™×” ×©×œ× ×§×©×•×¨×” ×œ×¢×‘×•×“×”?',
        'options': {
            'title': '×‘×—×¨/×™:',
            'buttons': ['×›×Ÿ', '×œ×']
        }
    },
    'awaiting_service': {
        'question': '××©×ž×— ×œ×”×‘×™×Ÿ ×‘×ž×” ×× ×™ ×™×›×•×œ×” ×œ×¢×–×•×¨:',
        'options': {
            'title': '×‘×—×¨/×™:',
            'buttons': [
                '×”×¡×‘×¨ ×¢×œ ×”×©×™×¨×•×ª ×”× ×“×¨×©',
                '×—×–×¨×” ×œ×ª×¤×¨×™×˜ ×”×¨××©×™'
            ]
        }
    },
    'completed': {
        'no_response': '××•×§×™×™, ×ž×¢×›×©×™×• ×”×©×™×—×” ×ª×ž×©×™×š ×›×¨×’×™×œ',
        'schedule_callback': '×ª×•×“×” ×¢×œ ×”×¤× ×™×™×”. ×ž×ª×™ × ×•×— ×œ×š ×©××—×–×•×¨ ××œ×™×š?'
    }
}

# Combined responses dictionary
SERVICE_RESPONSES = {
    'organization': ORGANIZATION_RESPONSES,
    'moving': MOVING_RESPONSES,
    'design': DESIGN_RESPONSES,
    'consultation': CONSULTATION_RESPONSES,
    '××—×¨': OTHER_RESPONSES
}

# Exported responses combining general and service responses
RESPONSES = {
    **GENERAL_RESPONSES,
    **SERVICE_RESPONSES
}

# WhatsApp API configuration
WHATSAPP_API = {
    'base_url': os.getenv('API_URL'),
    'endpoints': {
        'text': 'messages/text',
        'interactive': 'messages/interactive'
    },
    'headers': {
        'accept': 'application/json',
        'content-type': 'application/json',
        'authorization': f"Bearer {os.getenv('TOKEN')}"
    }
}

def get_api_url(message_type: str) -> str:
    """Get the appropriate API URL based on message type."""
    endpoint = WHATSAPP_API['endpoints'].get(message_type, 'text')
    return f"{WHATSAPP_API['base_url']}{endpoint}"

# Debug phone number
DEBUG_PHONE_NUMBER = "972546626125" # Shai Winograd's number